"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getUserListServe=getUserListServe,exports.addUserServe=addUserServe,exports.updatePrivilegeServe=updatePrivilegeServe,exports.resetPasswordServe=resetPasswordServe,exports.updateUserServe=updateUserServe,exports.deleteUserServe=deleteUserServe,exports.updateLoginNameServe=updateLoginNameServe,exports.updatePasswordServe=updatePasswordServe;var manageApi=_interopRequireWildcard(require("../api/manage")),_index=require("../util/index");function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var r,s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){Object.prototype.hasOwnProperty.call(e,o)&&((r=a?Object.getOwnPropertyDescriptor(e,o):null)&&(r.get||r.set)?Object.defineProperty(s,o,r):s[o]=e[o])}return s.default=e,t&&t.set(e,s),s}function getUserListServe(e,s){manageApi.getUserList(e).then(function(e){var t,r=e.data;200==r.code&&((t=r.data).forEach(function(e){e.privilege=(0,_index.privilegeTransform)(e.privilege)}),s.userList=t)}).catch(function(e){console.log(e)})}function addUserServe(e,t,r){manageApi.addUser(e).then(function(e){200==e.data.code?(r.$message({type:"success",message:"新建成功!"}),r.$service.default.manageServe.getUserListServe(t,r),r.dialogFormVisible=!1):r.$message({type:"error",message:"登陆名已存在!"})}).catch(function(e){console.log(e)})}function updatePrivilegeServe(e,t,r,s){var a=(0,_index.transformPrivilege)(t);manageApi.updatePrivilege(e,a).then(function(e){200==e.data.code?(s.$message({type:"success",message:"修改成功!"}),s.$service.default.manageServe.getUserListServe(r,s)):s.$message({type:"error",message:"修改失败!"})}).catch(function(e){console.log(e)})}function resetPasswordServe(e,t,r){manageApi.resetPassword(e,t).then(function(e){200==e.data.code?r.$message({type:"success",message:"重置成功!"}):r.$message({type:"error",message:"重置失败!"})}).catch(function(e){console.log(e)})}function updateUserServe(e,t,r,s){manageApi.updateUser(e,t).then(function(e){200==e.data.code?(s.$message({type:"success",message:"编辑成功!"}),s.$service.default.manageServe.getUserListServe(r,s),s.dialogFormVisible2=!1):s.$message({type:"error",message:"编辑失败!"})}).catch(function(e){console.log(e)})}function deleteUserServe(e,t,r){manageApi.deleteUser(e).then(function(e){200==e.data.code?(r.$message({type:"success",message:"删除成功!"}),r.$service.default.manageServe.getUserListServe(t,r)):r.$message({type:"error",message:"删除失败!"})}).catch(function(e){console.log(e)})}function updateLoginNameServe(e,t,r){manageApi.updateLogin_name(e,t).then(function(e){200==e.data.code?(r.$message({type:"success",message:"保存成功!"}),r.dialogFormVisible=!1):r.$message({type:"error",message:"登录名已存在!"})}).catch(function(e){console.log(e)})}function updatePasswordServe(e,t,r){manageApi.updatePassword(e,t).then(function(e){200==e.data.code?(r.$message({type:"success",message:"修改成功!"}),r.dialogFormVisible2=!1):r.$message({type:"error",message:"旧密码错误!"})}).catch(function(e){console.log(e)})}