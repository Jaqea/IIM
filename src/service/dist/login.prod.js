"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.loginService=loginService,exports.logOut=logOut;var _login=require("../api/login"),cookie=_interopRequireWildcard(require("./cookie"));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var o,r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e){Object.prototype.hasOwnProperty.call(e,i)&&((o=n?Object.getOwnPropertyDescriptor(e,i):null)&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i])}return r.default=e,t&&t.set(e,r),r}function loginService(e,r,n){var i=e.password;(0,_login.login)(e).then(function(e){var t,o=e.data;200==o.code?(t=o.data).privilege==r?(n.$message({showClose:!0,message:"登录成功！"}),cookie.setToken(o.token),t.password=i,n.$store.dispatch("set_user",t),n.$router.push({path:"/statistics",query:{Identity:r}})):n.$message({showClose:!0,message:"所登录的用户与您选择的身份不符！",type:"error"}):n.$message({showClose:!0,message:"登录名或密码错误！",type:"error"})}).catch(function(e){console.log(e)})}function logOut(e){window.localStorage.clear(),cookie.removeToken(),e.$store.dispatch("set_user",""),e.$router.push({path:"/login"}),e.$message({showClose:!0,message:"已登出！"})}