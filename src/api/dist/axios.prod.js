"use strict";var _axios=_interopRequireDefault(require("axios")),_cookie=require("service/cookie"),_index=_interopRequireDefault(require("../router/index"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var service=_axios.default.create({timeout:6e4,headers:{"Content-Type":"application/json;charset=UTF-8"},baseURL:"/api"}),serviceForm=_axios.default.create({timeout:6e4,headers:{"Content-Type":"multipart/form-data; charset=UTF-8","X-Requested-With":"XMLHttpRequest"},baseURL:"/api"}),request=function(e){var r=(0,_cookie.getToken)();return r&&(e.headers.common.Authorization=r),e},request_err=function(e){alert(e),console.log(e)},response=function(e){var r=e.data;e.headers.authorization&&(r.token=e.headers.authorization);var t="".concat(r.code,"--").concat(r.message)||"未知错误";return 200==e.status?(r.code&&(200==r.code||"Token过期"==r.message&&(alert(t),(0,_cookie.removeToken)(),localStorage.clear(),_index.default.go(0))),e):(alert(t),t)},response_err=function(e){if(e.response){var r=e.response.data,t="".concat(r.code,"--").concat(r.message)||"未知错误";return alert(t),t}return console.log(message),Promise.reject(e)};service.interceptors.request.use(request,request_err),service.interceptors.response.use(response,response_err),window.service=service;